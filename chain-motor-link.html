<link rel="import" href="../polymer/polymer.html">
<!--
  `<chain-motor-link></chain-motor-link>` motor for chain
  @demo demo.html
-->
<dom-module id="chain-motor-link">
  <template>
    <style is="custom-style">
      :host {display:inline-block}
      #chain {animation: xgo 1s infinite}
      #notMagnets {animation: xpules 1s infinite}
      @keyframes xgo{
        0%{transform:translate(30px,30px)}
        100%{transform:translate(28%,30px)}
      }
      @keyframes xpules{
        0%{opacity: 1}
        10%{opacity: 0}
        28%{opacity: 1}
        100%{opacity: 1}
      }
    </style>
    <svg height="300px" width$="[[width]]">
      <g id=coil transform$="translate([[x]],[[y]])" title="Coil">
        <path d="M 0 70 Q 0 15 80 15 M 100 130 Q 100 185 80 185 M 100 70 Q 100 15 80 15 M 30 130 Q 0 185 80 185" stroke=gold stroke-width=80 fill=none />
      </g>
      <g id=magnets transform$="translate([[x]],[[y]])" title="Magnet">
        <path d="M 0   70  Q 0  15 80 15 M 0  130 Q 0  185 80 185" stroke=blue stroke-width=30 fill=none />
        <path d="M 100 70  Q 100 15 80 15 M 100 130 Q 100 185 80 185" stroke=red stroke-width=30 fill=none />
      </g>
      <g id=notMagnets transform$="translate([[x]],[[y]])" title="Core">
        <path d="M 0 70 Q 0 15 80 15 M 100 130 Q 100 185 80 185 M 100 70 Q 100 15 80 15 M 30 100 Q 0 185 80 185" stroke=black stroke-width=30 fill=none />
      </g>
      <g id=chain transform$="translate([[x]],[[y]])" title="Chain link">
        <circle cx$=[[chainLink]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=[[chainLink]] cy$=[[chainY]] r=10 />
        <circle cx$=[[chainPitch]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=[[chainPitch]] cy$=[[chainY]] r=10 />
        <circle cx=0 cy$=[[chainY]] r=30 fill="gray" />
        <circle cx=0 cy$=[[chainY]] r=10 />
        <circle cx$=-[[chainPitch]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=-[[chainPitch]] cy$=[[chainY]] r=10 />
      </g>
    </svg>
  </template>
</dom-module>
<script>
  Polymer({
    is: "chain-motor-link",
    properties:{
      chainPitch:{
        value:100,
        type:Number,
      },
      chainLink:{
        type:Number,
        value:200,
      },
      width:{
        type:Number,
        value:200,
      },
      chainY:{
        type:Number,
        value:100,
      },
      widthMPitch:{
        computed:"getWidthMPitch(chainPitch,width)",
        type:Number,
      },
      y:{
        value:30
      },
      x:{
        value:30
      },
    },
    getWidthMPitch: function(chainPitch, width){
      return width - chainPitch 
    },
  })
</script>
