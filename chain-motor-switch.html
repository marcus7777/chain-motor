<link rel="import" href="../polymer/polymer.html">
<dom-module id="chain-motor-switch">
  <template>
    <style>
      :host {display:inline-block}
      #chain {animation: xgo 1s infinite}
      #switch {animation: xpules 1s infinite}
      #switched {animation: pules 1s infinite}
      @keyframes xgo{
        0%{transform:translate(30px,30px)}
        100%{transform:translate(130px,30px)}
      }
      @keyframes pules{
        0%{opacity: 0}
        30%{opacity: 1}
        58%{opacity: 0}
        100%{opacity: 0}
      }
      @keyframes xpules{
        0%{opacity: 1}
        30%{opacity: 0}
        58%{opacity: 1}
        100%{opacity: 1}
      }
    </style>
    <svg height="300px" width$="[[width]]" >
      <g id=magnets transform$="translate([[x]],[[y]])">
        <path d="M 0 70 L 30 45" stroke=red  stroke-width=10 fill=none />
        <path d="M 0 45 L 30 20" stroke=blue stroke-width=10 fill=none />
      </g>
      <g id=wire transform$="translate([[x]],[[y]])">
        <path d="M 0 130   L 30 142"   stroke=gold stroke-width=10 fill=none />
      </g>
      <g id=switch transform$="translate([[x]],[[y]])">
        <path d="M 0 145   L 30 143"   stroke=gold stroke-width=10 fill=none />
        <path d="M 0 145   L 30 147.5" stroke=blue  stroke-width=10 fill=none />
        <path d="M 0 147.5 L 30 150"   stroke=red stroke-width=10 fill=none />
      </g>
      <g id=switched transform$="translate([[x]],[[y]])">
        <path d="M 0 141   L 30 143"   stroke=gold stroke-width=10 fill=none />
        <path d="M 0 143   L 30 145.5" stroke=blue  stroke-width=10 fill=none />
        <path d="M 0 145.5 L 30 148"   stroke=red stroke-width=10 fill=none />
      </g>
      <g id=chain transform$="translate([[x]],[[y]])">
        <circle cx$=[[chainLink]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=[[chainLink]] cy$=[[chainY]] r=10 />
        <circle cx$=[[chainPitch]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=[[chainPitch]] cy$=[[chainY]] r=10 />
        <circle cx=0 cy$=[[chainY]] r=30 fill="gray" />
        <circle cx=0 cy$=[[chainY]] r=10 />
        <circle cx$=-[[chainPitch]] cy$=[[chainY]] r=30 fill="gray" />
        <circle cx$=-[[chainPitch]] cy$=[[chainY]] r=10 />
      </g>
    </svg>
  </template>
</dom-module>
<script>
  Polymer({
    is: "chain-motor-switch",
    properties:{
      chainPitch:{
        value:100,
        type:Number,
      },
      chainLink:{
        type:Number,
        value:200,
      },
      width:{
        type:Number,
        value:200,
      },
      chainY:{
        type:Number,
        value:100,
      },
      widthMPitch:{
        computed:"getWidthMPitch(chainPitch,width)",
        type:Number,
      },
      y:{
        value:30
      },
      x:{
        value:30
      },
    },
    getWidthMPitch: function(chainPitch, width){
      return width - chainPitch 
    },
  })
</script>
